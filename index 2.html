<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智影AI - 让想象发生</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        * { box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 0; overflow-x: hidden; background: #050505; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); } 50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); } }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .float-hover:hover { animation: float 2s ease-in-out infinite; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .play-btn { opacity: 0; transform: scale(0.8); transition: all 0.3s ease; }
        .group:hover .play-btn { opacity: 1; transform: scale(1); }
        .gradient-text { background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    </style>
</head>
<body class="bg-[#050505] text-white min-h-screen">
    <div id="app"></div>
    <script>
        const APP_NAME = "智影AI";
        
        // ========== 社区发现数据 - 24个精选作品 ==========
        const GALLERY_ITEMS = [
            { id: 1, title: "赛博朋克：雨夜霓虹", user: "CyberPunk_X", avatar: "CP", views: "12.5k", duration: "00:04", gradient: "from-purple-600 via-indigo-600 to-blue-600", tag: "4K", tagColor: "bg-purple-500" },
            { id: 2, title: "微距摄影：瞳孔宇宙", user: "Visionary", avatar: "VI", views: "8.2k", duration: "00:08", gradient: "from-amber-500 via-orange-500 to-red-500", tag: "Macro", tagColor: "bg-amber-500" },
            { id: 3, title: "深海：发光水母", user: "DeepBlue", avatar: "DB", views: "24k", duration: "00:05", gradient: "from-cyan-500 via-blue-500 to-indigo-600", tag: "Nature", tagColor: "bg-cyan-500" },
            { id: 4, title: "建筑：极简光影", user: "Arch_AI", avatar: "AR", views: "5.1k", duration: "00:06", gradient: "from-zinc-600 via-gray-600 to-slate-600", tag: "Arch", tagColor: "bg-zinc-500" },
            { id: 5, title: "超现实：融化的时钟", user: "Dali_Reborn", avatar: "DR", views: "19k", duration: "00:04", gradient: "from-pink-500 via-rose-500 to-red-500", tag: "Art", tagColor: "bg-pink-500" },
            { id: 6, title: "国风：水墨山水", user: "ZenMaster", avatar: "ZM", views: "32k", duration: "00:10", gradient: "from-emerald-600 via-teal-600 to-cyan-600", tag: "Ink", tagColor: "bg-emerald-500" },
            { id: 7, title: "动漫：机甲少女", user: "Mecha_Fan", avatar: "MF", views: "45k", duration: "00:05", gradient: "from-red-500 via-orange-500 to-yellow-500", tag: "Anime", tagColor: "bg-red-500" },
            { id: 8, title: "纪录片：森林晨雾", user: "GeoWild", avatar: "GW", views: "11k", duration: "00:12", gradient: "from-green-600 via-emerald-600 to-teal-600", tag: "Real", tagColor: "bg-green-500" },
            { id: 9, title: "科幻：星际穿越", user: "SpaceWalker", avatar: "SW", views: "67k", duration: "00:15", gradient: "from-violet-600 via-purple-600 to-fuchsia-600", tag: "Sci-Fi", tagColor: "bg-violet-500" },
            { id: 10, title: "古风：敦煌飞天", user: "OrientalArt", avatar: "OA", views: "28k", duration: "00:08", gradient: "from-amber-600 via-yellow-600 to-orange-500", tag: "Culture", tagColor: "bg-amber-500" },
            { id: 11, title: "美食：分子料理", user: "FoodieAI", avatar: "FA", views: "15k", duration: "00:06", gradient: "from-orange-500 via-red-500 to-pink-500", tag: "Food", tagColor: "bg-orange-500" },
            { id: 12, title: "时尚：T台走秀", user: "FashionLab", avatar: "FL", views: "22k", duration: "00:10", gradient: "from-fuchsia-600 via-pink-600 to-rose-500", tag: "Fashion", tagColor: "bg-fuchsia-500" },
            { id: 13, title: "恐怖：废弃医院", user: "HorrorMaker", avatar: "HM", views: "9.3k", duration: "00:07", gradient: "from-gray-700 via-slate-700 to-zinc-700", tag: "Horror", tagColor: "bg-gray-600" },
            { id: 14, title: "儿童：童话王国", user: "DreamFactory", avatar: "DF", views: "41k", duration: "00:12", gradient: "from-sky-400 via-cyan-400 to-blue-400", tag: "Kids", tagColor: "bg-sky-500" },
            { id: 15, title: "运动：极限滑雪", user: "ExtremePro", avatar: "EP", views: "33k", duration: "00:09", gradient: "from-cyan-500 via-blue-500 to-indigo-500", tag: "Sport", tagColor: "bg-cyan-500" },
            { id: 16, title: "婚礼：浪漫时刻", user: "LoveStory", avatar: "LS", views: "18k", duration: "00:11", gradient: "from-rose-400 via-pink-400 to-fuchsia-400", tag: "Wedding", tagColor: "bg-rose-500" },
            { id: 17, title: "科技：未来城市", user: "FutureCity", avatar: "FC", views: "56k", duration: "00:14", gradient: "from-indigo-600 via-blue-600 to-cyan-600", tag: "Tech", tagColor: "bg-indigo-500" },
            { id: 18, title: "动物：非洲草原", user: "WildLife", avatar: "WL", views: "38k", duration: "00:10", gradient: "from-yellow-500 via-amber-500 to-orange-500", tag: "Animal", tagColor: "bg-yellow-500" },
            { id: 19, title: "音乐：视觉交响", user: "MusicVis", avatar: "MV", views: "27k", duration: "00:08", gradient: "from-purple-500 via-violet-500 to-indigo-500", tag: "Music", tagColor: "bg-purple-500" },
            { id: 20, title: "历史：古罗马", user: "TimeTravel", avatar: "TT", views: "14k", duration: "00:13", gradient: "from-stone-500 via-amber-600 to-yellow-600", tag: "History", tagColor: "bg-stone-500" },
            { id: 21, title: "游戏：奇幻世界", user: "GameMaster", avatar: "GM", views: "52k", duration: "00:09", gradient: "from-emerald-500 via-green-500 to-lime-500", tag: "Game", tagColor: "bg-emerald-500" },
            { id: 22, title: "旅行：冰岛极光", user: "Traveler", avatar: "TR", views: "35k", duration: "00:11", gradient: "from-teal-500 via-cyan-500 to-blue-500", tag: "Travel", tagColor: "bg-teal-500" },
            { id: 23, title: "产品：手机展示", user: "ProductPro", avatar: "PP", views: "8.7k", duration: "00:06", gradient: "from-slate-500 via-gray-500 to-zinc-500", tag: "Product", tagColor: "bg-slate-500" },
            { id: 24, title: "抽象：流体艺术", user: "AbstractArt", avatar: "AA", views: "21k", duration: "00:07", gradient: "from-fuchsia-500 via-purple-500 to-violet-500", tag: "Abstract", tagColor: "bg-fuchsia-500" },
        ];
        
        // ========== 模板库数据 - 24个模板 ==========
        const TEMPLATES = [
            { id: 1, title: "电商产品展示", category: "商业", uses: "12.5k", gradient: "from-blue-600 via-indigo-600 to-purple-600", desc: "专业产品展示模板" },
            { id: 2, title: "动感音乐卡点", category: "娱乐", uses: "58.3k", gradient: "from-pink-500 via-rose-500 to-red-500", desc: "节奏感强烈的卡点视频" },
            { id: 3, title: "新闻播报数字人", category: "播报", uses: "8.2k", gradient: "from-cyan-600 via-blue-600 to-indigo-600", desc: "AI数字人新闻播报" },
            { id: 4, title: "史诗电影预告", category: "影视", uses: "34.1k", gradient: "from-amber-600 via-orange-600 to-red-600", desc: "震撼电影预告片风格" },
            { id: 5, title: "Logo 动态演绎", category: "品牌", uses: "21.7k", gradient: "from-violet-600 via-purple-600 to-fuchsia-600", desc: "品牌Logo动画展示" },
            { id: 6, title: "节日祝福视频", category: "生活", uses: "105k+", gradient: "from-red-500 via-pink-500 to-rose-500", desc: "温馨节日祝福模板" },
            { id: 7, title: "美食探店Vlog", category: "生活", uses: "42.3k", gradient: "from-orange-500 via-amber-500 to-yellow-500", desc: "诱人美食探店视频" },
            { id: 8, title: "科技发布会", category: "商业", uses: "15.6k", gradient: "from-indigo-600 via-blue-600 to-cyan-600", desc: "高端科技产品发布" },
            { id: 9, title: "婚礼纪念相册", category: "生活", uses: "67.8k", gradient: "from-rose-400 via-pink-400 to-fuchsia-400", desc: "浪漫婚礼纪念视频" },
            { id: 10, title: "教育培训课件", category: "教育", uses: "23.4k", gradient: "from-emerald-500 via-teal-500 to-cyan-500", desc: "专业教育课件模板" },
            { id: 11, title: "房产楼盘展示", category: "商业", uses: "9.8k", gradient: "from-sky-600 via-blue-600 to-indigo-600", desc: "高端房产展示视频" },
            { id: 12, title: "游戏直播片头", category: "游戏", uses: "31.2k", gradient: "from-purple-600 via-violet-600 to-indigo-600", desc: "炫酷游戏直播开场" },
            { id: 13, title: "旅行风景记录", category: "生活", uses: "45.6k", gradient: "from-teal-500 via-cyan-500 to-blue-500", desc: "精美旅行风景视频" },
            { id: 14, title: "企业宣传片", category: "商业", uses: "18.9k", gradient: "from-slate-600 via-gray-600 to-zinc-600", desc: "专业企业形象宣传" },
            { id: 15, title: "生日祝福动画", category: "生活", uses: "89.2k", gradient: "from-yellow-400 via-amber-400 to-orange-400", desc: "创意生日祝福动画" },
            { id: 16, title: "健身运动教程", category: "健康", uses: "27.5k", gradient: "from-green-500 via-emerald-500 to-teal-500", desc: "专业健身教学视频" },
            { id: 17, title: "宠物萌趣合集", category: "娱乐", uses: "56.7k", gradient: "from-orange-400 via-amber-400 to-yellow-400", desc: "可爱宠物趣味视频" },
            { id: 18, title: "知识科普动画", category: "教育", uses: "33.1k", gradient: "from-cyan-500 via-sky-500 to-blue-500", desc: "生动知识科普视频" },
            { id: 19, title: "抖音短视频", category: "娱乐", uses: "78.5k", gradient: "from-pink-500 via-rose-500 to-red-500", desc: "爆款短视频模板" },
            { id: 20, title: "小红书种草", category: "商业", uses: "41.2k", gradient: "from-red-400 via-pink-400 to-rose-400", desc: "种草推荐视频模板" },
            { id: 21, title: "B站片头片尾", category: "娱乐", uses: "29.8k", gradient: "from-indigo-500 via-purple-500 to-pink-500", desc: "UP主专属片头片尾" },
            { id: 22, title: "产品对比评测", category: "商业", uses: "16.3k", gradient: "from-blue-500 via-indigo-500 to-violet-500", desc: "专业产品评测视频" },
            { id: 23, title: "励志正能量", category: "生活", uses: "52.1k", gradient: "from-yellow-500 via-amber-500 to-orange-500", desc: "励志正能量短视频" },
            { id: 24, title: "搞笑段子合集", category: "娱乐", uses: "63.4k", gradient: "from-green-400 via-emerald-400 to-teal-400", desc: "幽默搞笑视频模板" },
        ];
        
        // ========== 作品管理数据 ==========
        const MY_WORKS = [
            { id: 1, title: "赛博朋克城市夜景", type: "video", status: "completed", date: "2小时前", duration: "00:08", size: "45MB", gradient: "from-purple-600 via-indigo-600 to-blue-600" },
            { id: 2, title: "水墨山水画意境", type: "video", status: "completed", date: "昨天", duration: "00:12", size: "68MB", gradient: "from-emerald-600 via-teal-600 to-cyan-600" },
            { id: 3, title: "产品宣传片-智能手机", type: "video", status: "completed", date: "3天前", duration: "00:15", size: "92MB", gradient: "from-blue-600 via-cyan-600 to-sky-600" },
            { id: 4, title: "动漫角色展示-机甲少女", type: "video", status: "completed", date: "5天前", duration: "00:06", size: "38MB", gradient: "from-red-500 via-orange-500 to-yellow-500" },
            { id: 5, title: "森林探险纪录片", type: "video", status: "completed", date: "1周前", duration: "00:10", size: "55MB", gradient: "from-green-600 via-emerald-600 to-teal-600" },
            { id: 6, title: "科幻飞船星际穿越", type: "video", status: "completed", date: "1周前", duration: "00:14", size: "78MB", gradient: "from-violet-600 via-purple-600 to-fuchsia-600" },
            { id: 7, title: "美食特写-分子料理", type: "video", status: "generating", date: "刚刚", duration: "--", size: "--", gradient: "from-orange-500 via-amber-500 to-yellow-500" },
            { id: 8, title: "古风舞蹈-敦煌飞天", type: "video", status: "draft", date: "2天前", duration: "--", size: "--", gradient: "from-amber-600 via-yellow-600 to-orange-500" },
            { id: 9, title: "时尚T台走秀", type: "video", status: "completed", date: "10天前", duration: "00:09", size: "62MB", gradient: "from-fuchsia-600 via-pink-600 to-rose-500" },
            { id: 10, title: "宠物猫咪萌趣合集", type: "video", status: "completed", date: "2周前", duration: "00:07", size: "41MB", gradient: "from-orange-400 via-amber-400 to-yellow-400" },
        ];
        
        // ========== 主体库数据 ==========
        const CHARACTERS = [
            { id: 1, name: "赛博少女-零", type: "character", style: "赛博朋克", usage: "156次", gradient: "from-purple-600 via-pink-600 to-rose-600", desc: "未来感十足的赛博风格少女" },
            { id: 2, name: "古风仙子-瑶", type: "character", style: "国风", usage: "234次", gradient: "from-amber-500 via-yellow-500 to-orange-500", desc: "飘逸灵动的古风仙女形象" },
            { id: 3, name: "机甲战士-X7", type: "character", style: "科幻", usage: "89次", gradient: "from-blue-600 via-cyan-600 to-teal-600", desc: "硬核科幻机甲战士" },
            { id: 4, name: "商务精英", type: "character", style: "写实", usage: "312次", gradient: "from-slate-600 via-gray-600 to-zinc-600", desc: "专业商务人士形象" },
            { id: 5, name: "萌宠猫咪", type: "animal", style: "3D卡通", usage: "567次", gradient: "from-orange-400 via-amber-400 to-yellow-400", desc: "可爱治愈系卡通猫咪" },
            { id: 6, name: "魔法少女-星", type: "character", style: "日系动漫", usage: "445次", gradient: "from-pink-500 via-rose-500 to-red-500", desc: "日系魔法少女风格" },
            { id: 7, name: "未来机器人", type: "character", style: "科幻", usage: "178次", gradient: "from-indigo-600 via-purple-600 to-violet-600", desc: "智能AI机器人形象" },
            { id: 8, name: "敦煌飞天", type: "character", style: "国风", usage: "289次", gradient: "from-yellow-500 via-amber-500 to-orange-500", desc: "古典敦煌飞天仙女" },
            { id: 9, name: "萌宠狗狗", type: "animal", style: "3D卡通", usage: "423次", gradient: "from-amber-400 via-yellow-400 to-green-400", desc: "活泼可爱的卡通狗狗" },
            { id: 10, name: "超级英雄", type: "character", style: "美漫", usage: "267次", gradient: "from-red-500 via-blue-500 to-purple-500", desc: "美式漫画超级英雄" },
            { id: 11, name: "古风书生", type: "character", style: "国风", usage: "198次", gradient: "from-teal-600 via-cyan-600 to-blue-600", desc: "儒雅古风书生形象" },
            { id: 12, name: "外星生物", type: "character", style: "科幻", usage: "134次", gradient: "from-green-500 via-emerald-500 to-teal-500", desc: "神秘外星生物形象" },
        ];
        
        // ========== 收藏夹数据 ==========
        const FAVORITES = [
            { id: 1, title: "赛博朋克：雨夜霓虹", user: "CyberPunk_X", avatar: "CP", views: "12.5k", duration: "00:04", gradient: "from-purple-600 via-indigo-600 to-blue-600", tag: "4K", saved: "3天前" },
            { id: 2, title: "国风：水墨山水", user: "ZenMaster", avatar: "ZM", views: "32k", duration: "00:10", gradient: "from-emerald-600 via-teal-600 to-cyan-600", tag: "Ink", saved: "1周前" },
            { id: 3, title: "科幻：星际穿越", user: "SpaceWalker", avatar: "SW", views: "67k", duration: "00:15", gradient: "from-violet-600 via-purple-600 to-fuchsia-600", tag: "Sci-Fi", saved: "2周前" },
            { id: 4, title: "古风：敦煌飞天", user: "OrientalArt", avatar: "OA", views: "28k", duration: "00:08", gradient: "from-amber-600 via-yellow-600 to-orange-500", tag: "Culture", saved: "5天前" },
            { id: 5, title: "科技：未来城市", user: "FutureCity", avatar: "FC", views: "56k", duration: "00:14", gradient: "from-indigo-600 via-blue-600 to-cyan-600", tag: "Tech", saved: "昨天" },
            { id: 6, title: "游戏：奇幻世界", user: "GameMaster", avatar: "GM", views: "52k", duration: "00:09", gradient: "from-emerald-500 via-green-500 to-lime-500", tag: "Game", saved: "4天前" },
            { id: 7, title: "婚礼：浪漫时刻", user: "LoveStory", avatar: "LS", views: "18k", duration: "00:11", gradient: "from-rose-400 via-pink-400 to-fuchsia-400", tag: "Wedding", saved: "6天前" },
            { id: 8, title: "美食：分子料理", user: "FoodieAI", avatar: "FA", views: "15k", duration: "00:06", gradient: "from-orange-500 via-red-500 to-pink-500", tag: "Food", saved: "1周前" },
        ];
        
        // ========== 定价策略 ==========
        const PRICING_PLANS = [
            { name: "体验版", price: "0", period: "/月", btnText: "当前版本", active: false, features: ["每月免费 5 积分", "生成标清 (720P) 视频", "单次时长 4s", "标准生成速度", "非商用授权"] },
            { name: "创作者", price: "68", originalPrice: "¥98", period: "/月", tag: "人气推荐", btnText: "立即升级", active: true, points: "每月 1,000 积分", features: ["生成高清 (1080P) 视频", "单次时长 8s", "优先生成通道", "无水印下载", "商用授权许可", "Gemini 灵感无限次"] },
            { name: "专业版", price: "1998", originalPrice: "¥2998", period: "/月", isGradient: true, tag: "限时特惠", btnText: "立即升级", active: false, points: "每月 10,000 积分", features: ["生成超清 (4K) 视频", "单次时长 30s", "极速生成通道 (Fast Pass)", "专属客户经理", "API 访问权限", "团队协作功能 (10人)", "自定义模型训练"] }
        ];

        // ========== 组件：侧边栏 ==========
        const Sidebar = ({ currentView }) => {
            const NavItem = ({ icon, label, id, badge }) => {
                const isActive = currentView === id;
                return `
                    <button onclick="handleNavClick('${id}')" class="w-full flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 text-sm font-medium group relative ${isActive ? 'bg-zinc-800/80 text-white shadow-inner shadow-black/20' : 'text-zinc-400 hover:bg-zinc-900 hover:text-white'}">
                        ${isActive ? '<div class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-5 bg-indigo-500 rounded-r-full shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>' : ''}
                        <i data-lucide="${icon}" class="w-4 h-4 transition-colors ${isActive ? 'text-indigo-400' : 'text-zinc-500 group-hover:text-zinc-300'}"></i>
                        <span class="flex-1 text-left">${label}</span>
                        ${badge ? `<span class="text-[10px] px-1.5 py-0.5 rounded font-bold ${badge === 'PRO' ? 'bg-gradient-to-r from-amber-500 to-orange-500 text-black' : 'bg-indigo-500/20 text-indigo-400 border border-indigo-500/30'}">${badge}</span>` : ''}
                    </button>
                `;
            };
            
            return `
                <div class="w-64 h-screen bg-[#050505] border-r border-white/5 flex flex-col fixed left-0 top-0 z-50">
                    <div class="p-6 flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.4)]">
                            <i data-lucide="play" class="w-4 h-4 text-white fill-white ml-0.5"></i>
                        </div>
                        <span class="text-xl font-bold text-white tracking-tight">${APP_NAME}</span>
                    </div>
                    <div class="flex-1 px-3 overflow-y-auto no-scrollbar py-2">
                        <div class="mb-6">
                            <div class="px-4 mb-2 text-[11px] uppercase tracking-wider text-zinc-600 font-bold">创作中心</div>
                            <div class="space-y-1">
                                ${NavItem({ icon: 'sparkles', label: '开始创作', id: 'create', badge: 'New' })}
                                ${NavItem({ icon: 'compass', label: '社区发现', id: 'discover' })}
                                ${NavItem({ icon: 'layout', label: '模板库', id: 'templates' })}
                            </div>
                        </div>
                        <div class="mb-6">
                            <div class="px-4 mb-2 text-[11px] uppercase tracking-wider text-zinc-600 font-bold">我的资产</div>
                            <div class="space-y-1">
                                ${NavItem({ icon: 'folder', label: '作品管理', id: 'assets' })}
                                ${NavItem({ icon: 'users', label: '主体库', id: 'characters', badge: 'Beta' })}
                                ${NavItem({ icon: 'heart', label: '收藏夹', id: 'likes' })}
                            </div>
                        </div>
                        <div class="mb-6">
                            <div class="px-4 mb-2 text-[11px] uppercase tracking-wider text-zinc-600 font-bold">设置与服务</div>
                            <div class="space-y-1">
                                ${NavItem({ icon: 'crown', label: '会员计划', id: 'pricing', badge: 'PRO' })}
                                ${NavItem({ icon: 'settings', label: '系统设置', id: 'settings' })}
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border-t border-white/5 bg-[#080808]">
                        <button class="flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/5 transition-colors group">
                            <div class="w-9 h-9 rounded-full bg-gradient-to-r from-zinc-700 to-zinc-600 p-[1px]">
                                <div class="w-full h-full rounded-full bg-black flex items-center justify-center">
                                    <i data-lucide="user" class="w-4 h-4 text-zinc-400"></i>
                                </div>
                            </div>
                            <div class="flex-1 text-left">
                                <div class="text-sm font-bold text-white group-hover:text-indigo-400 transition-colors">User_888</div>
                                <div class="text-[10px] text-zinc-500 flex items-center gap-1">
                                    <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> 在线
                                </div>
                            </div>
                            <i data-lucide="settings" class="w-4 h-4 text-zinc-600 group-hover:text-white transition-colors"></i>
                        </button>
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：顶部状态栏 ==========
        const TopBar = ({ title }) => `
            <div class="sticky top-0 z-40 bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 px-8 py-4 flex items-center justify-between ml-64 transition-all duration-300">
                <div class="flex items-center gap-3">
                    <h2 class="text-lg font-bold text-white">${title}</h2>
                </div>
                <div class="flex items-center gap-6">
                    <div class="flex items-center gap-2 px-4 py-1.5 bg-white/5 rounded-full border border-white/5 transition-all hover:bg-white/10 group cursor-pointer">
                        <div class="w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.6)]"></div>
                        <span class="text-xs text-zinc-300 font-medium group-hover:text-white">积分: <span class="text-white font-bold font-mono">1,250</span></span>
                        <i data-lucide="plus" class="w-3 h-3 text-zinc-500 group-hover:text-white"></i>
                    </div>
                    <div class="relative cursor-pointer group">
                        <i data-lucide="bell" class="w-5 h-5 text-zinc-500 group-hover:text-white transition-colors"></i>
                        <span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-red-500 rounded-full border border-black"></span>
                    </div>
                </div>
            </div>
        `;
        
        // ========== 组件：创作视图 ==========
        const CreateView = () => {
            const activeTab = window.appState?.createActiveTab || 'text';
            const prompt = window.appState?.createPrompt || '';
            const isEnhancing = window.appState?.createIsEnhancing || false;
            const isGenerating = window.appState?.createIsGenerating || false;
            const showSettings = window.appState?.createShowSettings || false;
            const aspectRatio = window.appState?.createAspectRatio || '16:9';
            const duration = window.appState?.createDuration || '4s';
            const resolution = window.appState?.createResolution || '1080P';
            const style = window.appState?.createStyle || '通用';
            const soundEnabled = window.appState?.createSoundEnabled || false;
            const modelType = window.appState?.createModelType || 'v1.5 Pro';
            
            const modelButtons = ['v1.0 Standard', 'v1.5 Pro', 'Turbo'].map(m => `
                <button onclick="handleModelChange('${m}')" class="px-4 py-1 rounded-full text-xs font-medium transition-all ${modelType === m ? 'bg-zinc-700 text-white shadow-sm' : 'text-zinc-500 hover:text-zinc-300'}">
                    ${m} ${m.includes('Pro') ? '<span class="ml-1 text-[9px] bg-indigo-500 text-white px-1 rounded">HOT</span>' : ''}
                </button>
            `).join('');
            
            const styleButtons = ['通用', '3D动画', '日系动漫', '写实电影', '像素风', '油画', '黏土动画', '科幻'].map(s => `
                <button onclick="handleStyleChange('${s}')" class="text-[10px] px-2.5 py-1 rounded-full border transition-colors whitespace-nowrap ${style === s ? 'bg-white text-black border-white' : 'bg-transparent text-zinc-500 border-zinc-800 hover:border-zinc-600'}">${s}</button>
            `).join('');
            
            const aspectRatioButtons = [
                { val: '16:9', icon: '<div class="w-5 h-3 border border-current rounded-[1px]"></div>' },
                { val: '9:16', icon: '<div class="w-3 h-5 border border-current rounded-[1px]"></div>' },
                { val: '1:1', icon: '<div class="w-4 h-4 border border-current rounded-[1px]"></div>' },
                { val: '2.35:1', icon: '<div class="w-6 h-2 border border-current rounded-[1px]"></div>' }
            ].map(item => `
                <button onclick="handleAspectRatioChange('${item.val}')" class="flex flex-col items-center justify-center py-2 rounded-lg border transition-all gap-1 ${aspectRatio === item.val ? 'bg-zinc-800 border-indigo-500 text-indigo-400' : 'border-zinc-800 text-zinc-500 hover:border-zinc-700 hover:text-zinc-400'}">
                    ${item.icon}
                    <span class="text-[9px] font-medium">${item.val}</span>
                </button>
            `).join('');
            
            return `
                <div class="max-w-6xl mx-auto px-6 py-8">
                    <div class="flex flex-col items-center mb-8 animate-fade-in-up">
                        <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 tracking-tight">
                            用 AI 导演你的 <span class="gradient-text">视觉奇迹</span>
                        </h1>
                        <div class="flex bg-zinc-900/80 p-1 rounded-full border border-white/5 mb-4">
                            ${modelButtons}
                        </div>
                    </div>
                    
                    <div class="bg-[#101012] border border-white/10 rounded-3xl p-1.5 shadow-2xl relative group max-w-4xl mx-auto">
                        <div class="flex items-center justify-between px-4 py-2">
                            <div class="flex gap-1 bg-black/40 rounded-xl p-1 border border-white/5">
                                <button onclick="handleTabChange('text')" class="px-4 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-2 ${activeTab === 'text' ? 'bg-zinc-800 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">
                                    <i data-lucide="type" class="w-3.5 h-3.5"></i> 文生视频
                                </button>
                                <button onclick="handleTabChange('image')" class="px-4 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-2 ${activeTab === 'image' ? 'bg-zinc-800 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">
                                    <i data-lucide="image" class="w-3.5 h-3.5"></i> 图生视频
                                </button>
                            </div>
                            <div class="flex items-center gap-2">
                                <button onclick="handleSoundToggle()" class="px-3 py-1.5 rounded-lg text-xs font-medium border flex items-center gap-1.5 transition-colors ${soundEnabled ? 'bg-indigo-500/10 text-indigo-400 border-indigo-500/30' : 'bg-transparent text-zinc-500 border-white/5 hover:text-zinc-300'}">
                                    <i data-lucide="${soundEnabled ? 'volume-2' : 'mic'}" class="w-3.5 h-3.5"></i>
                                    AI音效 ${soundEnabled ? 'On' : 'Off'}
                                </button>
                            </div>
                        </div>
                        
                        <div class="relative bg-[#18181b] rounded-2xl border border-white/5 flex flex-col transition-all">
                            ${activeTab === 'image' ? `
                                <div class="p-4 pb-0 grid grid-cols-3 gap-4">
                                    <div class="col-span-1 border border-dashed border-zinc-700 rounded-xl h-32 flex flex-col items-center justify-center text-zinc-500 hover:border-indigo-500/50 hover:bg-zinc-800/50 transition-colors cursor-pointer group/upload bg-zinc-900/30 relative overflow-hidden">
                                        <div class="absolute top-2 left-2 bg-black/60 px-2 py-0.5 rounded text-[10px] text-white">首帧参考</div>
                                        <i data-lucide="upload-cloud" class="w-5 h-5 text-zinc-400 mb-1"></i>
                                        <span class="text-[10px] text-zinc-600">点击上传</span>
                                    </div>
                                    <div class="col-span-1 border border-dashed border-zinc-700 rounded-xl h-32 flex flex-col items-center justify-center text-zinc-500 hover:border-purple-500/50 hover:bg-zinc-800/50 transition-colors cursor-pointer group/upload bg-zinc-900/30 relative overflow-hidden">
                                        <div class="absolute top-2 left-2 bg-purple-900/60 px-2 py-0.5 rounded text-[10px] text-purple-200 flex items-center gap-1">
                                            <i data-lucide="users" class="w-2.5 h-2.5"></i> 角色参考
                                        </div>
                                        <i data-lucide="user" class="w-5 h-5 text-zinc-400 mb-1"></i>
                                        <span class="text-[10px] text-zinc-600">保持角色一致</span>
                                    </div>
                                    <div class="col-span-1 border border-dashed border-zinc-700 rounded-xl h-32 flex flex-col items-center justify-center text-zinc-500 hover:border-blue-500/50 hover:bg-zinc-800/50 transition-colors cursor-pointer group/upload bg-zinc-900/30 relative overflow-hidden">
                                        <div class="absolute top-2 left-2 bg-blue-900/60 px-2 py-0.5 rounded text-[10px] text-blue-200">尾帧控制</div>
                                        <i data-lucide="arrow-right" class="w-5 h-5 text-zinc-400 mb-1"></i>
                                        <span class="text-[10px] text-zinc-600">可选尾帧</span>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <textarea id="prompt-textarea" class="w-full bg-transparent text-white placeholder-zinc-600 text-lg px-5 py-4 outline-none resize-none font-light leading-relaxed scrollbar-thin scrollbar-thumb-zinc-700 ${activeTab === 'image' ? 'min-h-[100px]' : 'min-h-[160px]'})" placeholder="${activeTab === 'text' ? '描述你想要生成的画面... 例如：电影镜头，雨中的东京街头，慢动作特写' : '描述要让图片动起来的效果...'}">${prompt}</textarea>
                            
                            <div class="px-5 pb-2 flex gap-2 overflow-x-auto no-scrollbar">
                                ${styleButtons}
                            </div>
                            
                            <div class="flex justify-between items-center p-3 border-t border-white/5 bg-[#141417] rounded-b-2xl">
                                <div class="flex items-center gap-2">
                                    <button onclick="handleSettingsToggle()" class="p-2 rounded-lg transition-colors flex items-center gap-2 text-xs font-medium ${showSettings ? 'bg-zinc-800 text-white' : 'text-zinc-400 hover:text-white hover:bg-zinc-800/50'}">
                                        <i data-lucide="sliders" class="w-4 h-4"></i> 参数
                                    </button>
                                    <div class="h-4 w-[1px] bg-white/10 mx-1"></div>
                                    <div class="flex gap-2 text-xs text-zinc-500">
                                        <span class="bg-zinc-900 px-2 py-1 rounded border border-white/5">${aspectRatio}</span>
                                        <span class="bg-zinc-900 px-2 py-1 rounded border border-white/5">${duration}</span>
                                        <span class="bg-zinc-900 px-2 py-1 rounded border border-white/5 text-indigo-400 border-indigo-500/20">${resolution}</span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center gap-3">
                                    <button onclick="handleEnhance()" disabled="${isEnhancing}" class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-indigo-400 hover:bg-indigo-500/10 transition-colors disabled:opacity-50">
                                        ${isEnhancing ? '<i data-lucide="loader-2" class="w-3.5 h-3.5 animate-spin"></i>' : '<i data-lucide="wand-2" class="w-3.5 h-3.5"></i>'}
                                        ${prompt ? 'AI 润色' : '灵感'}
                                    </button>
                                    <button onclick="handleGenerate()" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white px-6 py-2 rounded-xl font-bold text-sm shadow-[0_0_20px_rgba(79,70,229,0.3)] transition-all transform active:scale-95 flex items-center gap-2">
                                        ${isGenerating ? '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i>' : '<i data-lucide="sparkles" class="w-4 h-4 fill-white"></i>'}
                                        立即生成
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        ${showSettings ? `
                            <div class="mt-2 bg-[#18181b] border border-white/10 rounded-xl p-5 animate-fade-in-up" id="settings-panel">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                    <div class="space-y-4">
                                        <div>
                                            <label class="text-xs text-zinc-500 font-bold mb-2 block uppercase tracking-wider">画幅比例</label>
                                            <div class="grid grid-cols-4 gap-2">${aspectRatioButtons}</div>
                                        </div>
                                        <div>
                                            <label class="text-xs text-zinc-500 font-bold mb-2 block uppercase tracking-wider">负向提示词</label>
                                            <input type="text" id="negative-prompt-input" placeholder="例如：模糊，变形，低画质，水印..." class="w-full bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-xs text-white placeholder-zinc-600 focus:border-zinc-600 focus:outline-none" />
                                        </div>
                                    </div>
                                    <div>
                                        <label class="text-xs text-zinc-500 font-bold mb-3 block uppercase tracking-wider">生成规格</label>
                                        <div class="space-y-4">
                                            <div>
                                                <span class="text-xs text-zinc-400 mb-1 block">时长</span>
                                                <div class="flex bg-zinc-900 rounded-lg p-1 border border-zinc-800">
                                                    <button onclick="handleDurationChange('4s')" class="flex-1 text-xs py-1.5 rounded-md font-medium transition-all ${duration === '4s' ? 'bg-zinc-700 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">4s</button>
                                                    <button onclick="handleDurationChange('8s')" class="flex-1 text-xs py-1.5 rounded-md font-medium transition-all ${duration === '8s' ? 'bg-zinc-700 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">8s <span class="text-[9px] text-amber-500 ml-1">PRO</span></button>
                                                </div>
                                            </div>
                                            <div>
                                                <span class="text-xs text-zinc-400 mb-1 block">分辨率</span>
                                                <div class="flex bg-zinc-900 rounded-lg p-1 border border-zinc-800">
                                                    <button onclick="handleResolutionChange('1080P')" class="flex-1 text-xs py-1.5 rounded-md font-medium transition-all ${resolution === '1080P' ? 'bg-zinc-700 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">1080P</button>
                                                    <button onclick="handleResolutionChange('4K')" class="flex-1 text-xs py-1.5 rounded-md font-medium transition-all ${resolution === '4K' ? 'bg-zinc-700 text-white shadow' : 'text-zinc-500 hover:text-zinc-300'}">4K <span class="text-[9px] text-amber-500 ml-1">PRO</span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="text-xs text-zinc-500 font-bold mb-3 block uppercase tracking-wider">AI 运镜控制</label>
                                        <div class="bg-zinc-900/50 rounded-xl p-4 border border-zinc-800 flex flex-col items-center gap-3">
                                            <div class="grid grid-cols-3 gap-2 w-full">
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="rotate-cw" class="w-4 h-4 rotate-[-45deg]"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="arrow-right" class="w-4 h-4 -rotate-90"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="rotate-cw" class="w-4 h-4 rotate-45"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="arrow-right" class="w-4 h-4 rotate-180"></i></button>
                                                <div class="aspect-square rounded bg-indigo-500/20 border border-indigo-500/50 flex items-center justify-center text-indigo-400"><i data-lucide="video" class="w-4 h-4"></i></div>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="zoom-in" class="w-4 h-4"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="arrow-right" class="w-4 h-4 rotate-90"></i></button>
                                                <button class="aspect-square rounded bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center text-zinc-400 hover:text-white transition-colors"><i data-lucide="zoom-in" class="w-4 h-4 scale-75"></i></button>
                                            </div>
                                            <div class="text-[10px] text-zinc-500 text-center w-full">点击方向键控制镜头移动</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="mt-16 max-w-4xl mx-auto">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-white font-bold flex items-center gap-2"><i data-lucide="clock" class="w-4 h-4 text-zinc-500"></i> 生成队列</h3>
                            <button class="text-xs text-zinc-500 hover:text-white">管理全部</button>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="aspect-video bg-zinc-900/50 rounded-xl border border-indigo-500/30 flex flex-col items-center justify-center gap-2 relative overflow-hidden">
                                <div class="absolute top-0 left-0 h-1 bg-indigo-500 animate-[loading_2s_ease-in-out_infinite] w-full"></div>
                                <i data-lucide="loader-2" class="w-6 h-6 text-indigo-400 animate-spin"></i>
                                <span class="text-xs text-indigo-300 font-medium">生成中 45%...</span>
                            </div>
                            ${[1,2,3].map(i => `
                                <div class="aspect-video bg-gradient-to-br from-purple-900/30 to-indigo-900/30 rounded-xl border border-white/5 flex flex-col items-center justify-center text-zinc-700 hover:border-zinc-700 transition-colors group cursor-pointer relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <span class="text-xs text-zinc-500">历史记录 #${i}</span>
                                    <div class="absolute bottom-0 left-0 right-0 p-2 bg-black/80 translate-y-full group-hover:translate-y-0 transition-transform flex justify-around">
                                        <button class="text-[10px] text-white hover:text-indigo-400">下载</button>
                                        <button class="text-[10px] text-white hover:text-indigo-400">高清化</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：社区发现视图 ==========
        const DiscoverView = () => {
            const tags = ["全部", "写实电影", "3D动画", "二次元", "水墨国风", "商业广告", "特效创意", "科幻", "国风", "美食", "时尚", "游戏"];
            
            const galleryItems = GALLERY_ITEMS.map(item => `
                <div class="break-inside-avoid bg-[#121214] rounded-2xl overflow-hidden border border-white/5 hover:border-indigo-500/50 transition-all duration-300 group cursor-pointer relative card-hover">
                    <div class="w-full aspect-[9/16] bg-gradient-to-br ${item.gradient} relative overflow-hidden">
                        <!-- 视频预览效果 -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-full h-full opacity-30" style="background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px);"></div>
                        </div>
                        
                        <!-- 标签 -->
                        <div class="absolute top-3 left-3 ${item.tagColor} px-2 py-1 rounded-lg text-[10px] text-white font-bold shadow-lg">
                            ${item.tag}
                        </div>
                        <div class="absolute top-3 right-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white font-mono border border-white/10 flex items-center gap-1">
                            <i data-lucide="clock" class="w-3 h-3"></i> ${item.duration}
                        </div>
                        
                        <!-- 播放按钮 -->
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/30 backdrop-blur-[2px]">
                            <div class="w-14 h-14 rounded-full bg-white/20 backdrop-blur-xl border-2 border-white/40 flex items-center justify-center play-btn pulse-glow">
                                <i data-lucide="play" class="w-6 h-6 text-white fill-white ml-1"></i>
                            </div>
                        </div>
                        
                        <!-- 底部信息 -->
                        <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent">
                            <h3 class="text-white text-sm font-bold mb-1 line-clamp-2">${item.title}</h3>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <div class="w-7 h-7 rounded-full bg-gradient-to-br ${item.gradient} flex items-center justify-center text-[10px] font-bold text-white">${item.avatar}</div>
                                <span class="text-xs text-zinc-400">${item.user}</span>
                            </div>
                            <div class="flex items-center gap-3 text-zinc-500">
                                <div class="flex items-center gap-1 hover:text-pink-500 transition-colors cursor-pointer">
                                    <i data-lucide="heart" class="w-3.5 h-3.5"></i>
                                    <span class="text-[10px]">${item.views}</span>
                                </div>
                                <i data-lucide="share-2" class="w-3.5 h-3.5 hover:text-white transition-colors cursor-pointer"></i>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            return `
                <div class="px-8 py-8">
                    <div class="flex items-center gap-4 mb-8 overflow-x-auto no-scrollbar pb-2">
                        ${tags.map((tag, i) => `
                            <button onclick="handleTagClick('${tag}')" class="px-5 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${i === 0 ? 'bg-white text-black' : 'bg-zinc-900 text-zinc-400 hover:text-white hover:bg-zinc-800 border border-white/5'}">${tag}</button>
                        `).join('')}
                    </div>
                    
                    <div class="columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6 space-y-6">
                        ${galleryItems}
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：模板库视图 ==========
        const TemplatesView = () => {
            const categories = ["全部", "商业", "娱乐", "生活", "教育", "游戏", "健康"];
            
            const templates = TEMPLATES.map(tpl => `
                <div class="group bg-[#121214] border border-white/5 rounded-2xl overflow-hidden hover:border-indigo-500/50 transition-all card-hover">
                    <div class="aspect-video bg-gradient-to-br ${tpl.gradient} relative overflow-hidden">
                        <!-- 模板预览效果 -->
                        <div class="absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/40">
                            <div class="flex gap-3">
                                <button class="px-4 py-2 bg-white text-black rounded-full text-xs font-bold flex items-center gap-2 hover:bg-indigo-50 transition-colors">
                                    <i data-lucide="sparkles" class="w-3.5 h-3.5"></i> 使用模板
                                </button>
                                <button class="px-4 py-2 bg-white/20 backdrop-blur-md text-white rounded-full text-xs font-bold flex items-center gap-2 hover:bg-white/30 transition-colors border border-white/30">
                                    <i data-lucide="eye" class="w-3.5 h-3.5"></i> 查看灵感
                                </button>
                            </div>
                        </div>
                        
                        <!-- 分类标签 -->
                        <div class="absolute top-3 left-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white border border-white/10">
                            ${tpl.category}
                        </div>
                        
                        <!-- 预览图标 -->
                        <div class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/20">
                            <i data-lucide="play" class="w-4 h-4 text-white fill-white"></i>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="text-white font-bold text-sm mb-1">${tpl.title}</h3>
                        <p class="text-xs text-zinc-500 mb-3">${tpl.desc}</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-1 text-zinc-500">
                                <i data-lucide="users" class="w-3.5 h-3.5"></i>
                                <span class="text-xs">${tpl.uses} 人已使用</span>
                            </div>
                            <button class="p-2 rounded-full bg-zinc-800 text-zinc-400 hover:bg-indigo-600 hover:text-white transition-all">
                                <i data-lucide="plus" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            return `
                <div class="px-8 py-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-white mb-2">灵感模板库</h2>
                        <p class="text-zinc-500 text-sm">选择一个模板，快速开始你的创作</p>
                    </div>
                    
                    <div class="flex items-center gap-3 mb-8 overflow-x-auto no-scrollbar pb-2">
                        ${categories.map((cat, i) => `
                            <button class="px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${i === 0 ? 'bg-indigo-600 text-white' : 'bg-zinc-900 text-zinc-400 hover:text-white hover:bg-zinc-800 border border-white/5'}">${cat}</button>
                        `).join('')}
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        ${templates}
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：作品管理视图 ==========
        const AssetsView = () => {
            const works = MY_WORKS.map(work => `
                <div class="group relative aspect-video bg-[#121214] rounded-xl overflow-hidden border border-white/5 hover:border-indigo-500/50 transition-all card-hover cursor-pointer">
                    ${work.status === 'generating' ? `
                        <div class="absolute inset-0 bg-gradient-to-br ${work.gradient} opacity-30"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <i data-lucide="loader-2" class="w-10 h-10 text-indigo-400 animate-spin mb-3"></i>
                            <span class="text-sm text-indigo-300 font-medium">生成中...</span>
                            <span class="text-xs text-zinc-500 mt-1">预计还需 2 分钟</span>
                        </div>
                        <div class="absolute bottom-0 left-0 right-0 h-1.5 bg-zinc-800">
                            <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 w-2/3 animate-pulse rounded-full"></div>
                        </div>
                    ` : work.status === 'draft' ? `
                        <div class="absolute inset-0 bg-gradient-to-br ${work.gradient} opacity-20"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <div class="w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center mb-3">
                                <i data-lucide="file-edit" class="w-5 h-5 text-zinc-500"></i>
                            </div>
                            <span class="text-sm text-zinc-400 font-medium">草稿</span>
                            <span class="text-xs text-zinc-600 mt-1">上次编辑 ${work.date}</span>
                        </div>
                    ` : `
                        <div class="absolute inset-0 bg-gradient-to-br ${work.gradient}"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
                        
                        <!-- 悬浮操作 -->
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/40">
                            <div class="flex gap-2">
                                <button class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center hover:bg-white/30 transition-colors border border-white/30">
                                    <i data-lucide="play" class="w-4 h-4 text-white"></i>
                                </button>
                                <button class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center hover:bg-white/30 transition-colors border border-white/30">
                                    <i data-lucide="download" class="w-4 h-4 text-white"></i>
                                </button>
                                <button class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center hover:bg-white/30 transition-colors border border-white/30">
                                    <i data-lucide="share-2" class="w-4 h-4 text-white"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 时长 -->
                        <div class="absolute top-3 right-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white border border-white/10">
                            ${work.duration}
                        </div>
                        
                        <!-- 底部信息 -->
                        <div class="absolute bottom-3 left-3 right-3">
                            <div class="text-white text-sm font-medium truncate">${work.title}</div>
                            <div class="flex items-center justify-between mt-1">
                                <span class="text-xs text-zinc-400">${work.date}</span>
                                <span class="text-xs text-green-400 flex items-center gap-1">
                                    <i data-lucide="check-circle-2" class="w-3 h-3"></i> 完成
                                </span>
                            </div>
                        </div>
                    `}
                </div>
            `).join('');
            
            return `
                <div class="px-8 py-8">
                    <div class="bg-[#121214] border border-white/5 rounded-2xl min-h-[60vh] p-6">
                        <div class="flex items-center justify-between mb-8">
                            <div class="flex gap-1 bg-zinc-900/50 rounded-xl p-1 border border-white/5">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium">全部文件</button>
                                <button class="px-4 py-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg text-sm font-medium transition-colors">视频</button>
                                <button class="px-4 py-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg text-sm font-medium transition-colors">图片</button>
                                <button class="px-4 py-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg text-sm font-medium transition-colors">草稿</button>
                            </div>
                            <div class="flex gap-2">
                                <button class="p-2 rounded-lg bg-zinc-800 text-zinc-400 border border-white/5 hover:text-white hover:bg-zinc-700 transition-colors">
                                    <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                                </button>
                                <button class="p-2 rounded-lg bg-zinc-800 text-zinc-400 border border-white/5 hover:text-white hover:bg-zinc-700 transition-colors">
                                    <i data-lucide="list" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                            <div class="aspect-video rounded-xl border-2 border-dashed border-zinc-800 hover:border-indigo-500/50 hover:bg-zinc-900/50 transition-all cursor-pointer flex flex-col items-center justify-center gap-3 group">
                                <div class="w-12 h-12 rounded-full bg-zinc-800 group-hover:bg-indigo-600 flex items-center justify-center transition-colors">
                                    <i data-lucide="plus" class="w-5 h-5 text-zinc-400 group-hover:text-white"></i>
                                </div>
                                <span class="text-sm text-zinc-500 font-medium group-hover:text-white">新建项目</span>
                            </div>
                            ${works}
                        </div>
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：主体库视图 ==========
        const CharactersView = () => {
            const characters = CHARACTERS.map(char => `
                <div class="group bg-[#121214] border border-white/5 rounded-2xl overflow-hidden hover:border-indigo-500/50 transition-all card-hover cursor-pointer">
                    <div class="aspect-square bg-gradient-to-br ${char.gradient} relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                        
                        <!-- 角色图标 -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-20 h-20 rounded-full bg-white/10 backdrop-blur-md border-2 border-white/20 flex items-center justify-center float-hover">
                                <i data-lucide="${char.type === 'animal' ? 'cat' : 'user'}" class="w-10 h-10 text-white/80"></i>
                            </div>
                        </div>
                        
                        <!-- 风格标签 -->
                        <div class="absolute top-3 left-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white border border-white/10">
                            ${char.style}
                        </div>
                        
                        <!-- 使用次数 -->
                        <div class="absolute top-3 right-3 bg-indigo-600/80 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white flex items-center gap-1">
                            <i data-lucide="zap" class="w-3 h-3"></i> ${char.usage}
                        </div>
                        
                        <!-- 悬浮操作 -->
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/40">
                            <button class="px-4 py-2 bg-white text-black rounded-full text-xs font-bold flex items-center gap-2 hover:bg-indigo-50 transition-colors">
                                <i data-lucide="sparkles" class="w-3.5 h-3.5"></i> 使用主体
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="text-white font-bold text-sm mb-1">${char.name}</h3>
                        <p class="text-xs text-zinc-500">${char.desc}</p>
                        <div class="mt-3 flex items-center justify-between">
                            <span class="text-xs text-zinc-600">${char.type === 'character' ? '角色' : '动物'}</span>
                            <button class="p-1.5 rounded-full bg-zinc-800 text-zinc-400 hover:bg-pink-600 hover:text-white transition-colors">
                                <i data-lucide="heart" class="w-3.5 h-3.5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            return `
                <div class="px-8 py-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-white mb-2">主体库</h2>
                        <p class="text-zinc-500 text-sm">管理和使用你的自定义角色与主体</p>
                    </div>
                    
                    <div class="flex items-center gap-4 mb-8">
                        <button class="px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-medium flex items-center gap-2 hover:bg-indigo-500 transition-colors shadow-lg shadow-indigo-600/20">
                            <i data-lucide="plus" class="w-4 h-4"></i> 创建主体
                        </button>
                        <button class="px-4 py-2.5 bg-zinc-800 text-zinc-300 rounded-xl text-sm font-medium flex items-center gap-2 hover:bg-zinc-700 transition-colors border border-white/5">
                            <i data-lucide="upload" class="w-4 h-4"></i> 导入主体
                        </button>
                        <div class="flex-1"></div>
                        <div class="flex gap-2">
                            <button class="px-3 py-2 bg-zinc-800 text-zinc-400 rounded-lg text-sm hover:text-white hover:bg-zinc-700 transition-colors border border-white/5">全部</button>
                            <button class="px-3 py-2 bg-zinc-900 text-zinc-500 rounded-lg text-sm hover:text-white hover:bg-zinc-800 transition-colors border border-white/5">角色</button>
                            <button class="px-3 py-2 bg-zinc-900 text-zinc-500 rounded-lg text-sm hover:text-white hover:bg-zinc-800 transition-colors border border-white/5">动物</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
                        ${characters}
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：收藏夹视图 ==========
        const LikesView = () => {
            const favorites = FAVORITES.map(item => `
                <div class="break-inside-avoid bg-[#121214] rounded-2xl overflow-hidden border border-white/5 hover:border-pink-500/50 transition-all duration-300 group cursor-pointer relative card-hover">
                    <div class="w-full aspect-[9/16] bg-gradient-to-br ${item.gradient} relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/30 backdrop-blur-[2px]">
                            <div class="w-14 h-14 rounded-full bg-white/20 backdrop-blur-xl border-2 border-white/40 flex items-center justify-center play-btn pulse-glow">
                                <i data-lucide="play" class="w-6 h-6 text-white fill-white ml-1"></i>
                            </div>
                        </div>
                        
                        <div class="absolute top-3 left-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white font-bold border border-white/10">
                            ${item.tag}
                        </div>
                        <div class="absolute top-3 right-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] text-white font-mono border border-white/10 flex items-center gap-1">
                            <i data-lucide="clock" class="w-3 h-3"></i> ${item.duration}
                        </div>
                        
                        <!-- 取消收藏 -->
                        <div class="absolute top-14 right-3 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button class="w-8 h-8 rounded-full bg-pink-500/80 hover:bg-pink-500 flex items-center justify-center text-white transition-colors">
                                <i data-lucide="heart" class="w-4 h-4 fill-white"></i>
                            </button>
                        </div>
                        
                        <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent">
                            <h3 class="text-white text-sm font-bold line-clamp-2">${item.title}</h3>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="w-6 h-6 rounded-full bg-gradient-to-br ${item.gradient} flex items-center justify-center text-[9px] font-bold text-white">${item.avatar}</div>
                            <span class="text-xs text-zinc-400">${item.user}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-zinc-500">收藏于 ${item.saved}</span>
                            <div class="flex items-center gap-1 text-zinc-500">
                                <i data-lucide="eye" class="w-3 h-3"></i>
                                <span class="text-[10px]">${item.views}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            return `
                <div class="px-8 py-8">
                    <div class="mb-8 flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">我的收藏</h2>
                            <p class="text-zinc-500 text-sm">共收藏 <span class="text-indigo-400 font-bold">${FAVORITES.length}</span> 个作品</p>
                        </div>
                        <button class="px-4 py-2 bg-zinc-800 text-zinc-400 rounded-lg text-sm hover:text-white hover:bg-zinc-700 transition-colors border border-white/5 flex items-center gap-2">
                            <i data-lucide="folder-plus" class="w-4 h-4"></i> 新建收藏夹
                        </button>
                    </div>
                    
                    <div class="columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6 space-y-6">
                        ${favorites}
                    </div>
                </div>
            `;
        };
        
        // ========== 组件：定价视图 ==========
        const PricingView = () => {
            const plans = PRICING_PLANS.map((plan, i) => `
                <div class="relative p-8 rounded-3xl border flex flex-col transition-all duration-300 hover:-translate-y-2 ${plan.active ? 'bg-zinc-900/80 border-indigo-500/50 shadow-2xl shadow-indigo-500/10 z-10 scale-105' : plan.isGradient ? 'bg-gradient-to-b from-slate-900 to-black border-purple-500/30' : 'bg-black border-zinc-800'}">
                    ${plan.tag ? `<div class="absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full text-xs font-bold text-white shadow-lg">${plan.tag}</div>` : ''}
                    <h3 class="text-xl font-bold mb-2 ${plan.isGradient ? 'gradient-text' : 'text-white'}">${plan.name}</h3>
                    <div class="flex items-baseline gap-1 mb-6">
                        <span class="text-4xl font-bold text-white font-mono">¥${plan.price}</span>
                        ${plan.originalPrice ? `<span class="text-lg text-zinc-600 line-through">${plan.originalPrice}</span>` : ''}
                        <span class="text-zinc-500 text-sm">${plan.period}</span>
                    </div>
                    <div class="space-y-4 mb-8 flex-1">
                        ${plan.points ? `<div class="flex items-center gap-3 text-sm text-white font-medium bg-white/5 p-3 rounded-xl border border-white/5"><i data-lucide="zap" class="w-4 h-4 text-yellow-500 fill-yellow-500"></i> ${plan.points}</div>` : ''}
                        ${plan.features.map(feat => `<div class="flex items-start gap-3 text-sm text-zinc-300"><i data-lucide="check-circle-2" class="w-4 h-4 shrink-0 mt-0.5 ${plan.active ? 'text-indigo-500' : 'text-zinc-600'}"></i>${feat}</div>`).join('')}
                    </div>
                    <button class="w-full py-3.5 rounded-xl font-bold text-sm transition-all ${plan.active ? 'bg-white text-black hover:bg-indigo-50 hover:text-indigo-600 hover:shadow-lg' : plan.isGradient ? 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:opacity-90 shadow-lg shadow-purple-900/20' : 'bg-zinc-800 text-white hover:bg-zinc-700'}">${plan.btnText}</button>
                </div>
            `).join('');
            
            return `
                <div class="max-w-7xl mx-auto px-8 py-12">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold text-white mb-4">解锁 <span class="gradient-text">智影AI</span> 完整创造力</h2>
                        <p class="text-zinc-500">灵活的订阅方案，随时取消，助力你的创意落地。</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-end">${plans}</div>
                </div>
            `;
        };
        
        // ========== 组件：系统设置视图 ==========
        const SettingsView = () => {
            return `
                <div class="max-w-3xl mx-auto px-8 py-12">
                    <h2 class="text-2xl font-bold text-white mb-8">系统设置</h2>
                    <div class="space-y-6">
                        <div class="bg-[#121214] border border-white/5 rounded-2xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="user" class="w-5 h-5 text-indigo-400"></i> 账号信息</h3>
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-xl font-bold text-white">U</div>
                                <div>
                                    <div class="font-bold text-white">User_888</div>
                                    <div class="text-zinc-500 text-sm">uid: 88888888</div>
                                </div>
                                <button class="ml-auto px-4 py-2 border border-white/10 rounded-lg text-sm hover:bg-white/5 text-zinc-300 transition-colors">编辑资料</button>
                            </div>
                        </div>
                        <div class="bg-[#121214] border border-white/5 rounded-2xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="monitor" class="w-5 h-5 text-indigo-400"></i> 偏好设置</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between py-2">
                                    <span class="text-zinc-300">深色模式</span>
                                    <div class="w-12 h-6 bg-indigo-600 rounded-full relative cursor-pointer"><div class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full shadow-lg"></div></div>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <span class="text-zinc-300">生成完成后邮件通知</span>
                                    <div class="w-12 h-6 bg-zinc-700 rounded-full relative cursor-pointer"><div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-lg"></div></div>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <span class="text-zinc-300">自动保存草稿</span>
                                    <div class="w-12 h-6 bg-indigo-600 rounded-full relative cursor-pointer"><div class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full shadow-lg"></div></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-[#121214] border border-white/5 rounded-2xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="shield" class="w-5 h-5 text-indigo-400"></i> 安全设置</h3>
                            <div class="space-y-3">
                                <button class="w-full flex items-center justify-between p-3 bg-zinc-900 rounded-xl hover:bg-zinc-800 transition-colors border border-white/5">
                                    <span class="text-zinc-300">修改密码</span>
                                    <i data-lucide="chevron-right" class="w-4 h-4 text-zinc-500"></i>
                                </button>
                                <button class="w-full flex items-center justify-between p-3 bg-zinc-900 rounded-xl hover:bg-zinc-800 transition-colors border border-white/5">
                                    <span class="text-zinc-300">绑定手机</span>
                                    <span class="text-xs text-green-500 flex items-center gap-1"><i data-lucide="check-circle-2" class="w-3 h-3"></i> 已绑定</span>
                                </button>
                                <button class="w-full flex items-center justify-between p-3 bg-zinc-900 rounded-xl hover:bg-zinc-800 transition-colors border border-white/5">
                                    <span class="text-zinc-300">两步验证</span>
                                    <span class="text-xs text-zinc-500">未开启</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };
        
        // ========== 主应用组件 ==========
        const App = () => {
            const currentView = window.appState?.currentView || 'create';
            
            const getTitle = () => {
                const titles = { create: '创作中心', discover: '社区发现', templates: '模板库', assets: '作品管理', characters: '主体库', likes: '收藏夹', pricing: '会员计划', settings: '系统设置' };
                return titles[currentView] || APP_NAME;
            };
            
            const renderView = () => {
                const views = { create: CreateView, discover: DiscoverView, templates: TemplatesView, assets: AssetsView, characters: CharactersView, likes: LikesView, pricing: PricingView, settings: SettingsView };
                return (views[currentView] || CreateView)();
            };
            
            return `
                <div class="flex min-h-screen bg-[#050505] text-white selection:bg-indigo-500/30">
                    ${Sidebar({ currentView })}
                    <div class="flex-1 ml-64 relative min-h-screen flex flex-col">
                        ${TopBar({ title: getTitle() })}
                        <main class="flex-1 relative overflow-hidden overflow-y-auto no-scrollbar">
                            <div class="absolute top-0 left-0 w-full h-full pointer-events-none z-0 fixed">
                                <div class="absolute top-[-10%] right-[-5%] w-[600px] h-[600px] rounded-full bg-indigo-900/10 blur-[100px] mix-blend-screen"></div>
                                <div class="absolute bottom-[-10%] left-[10%] w-[500px] h-[500px] rounded-full bg-purple-900/5 blur-[80px] mix-blend-screen"></div>
                            </div>
                            <div class="relative z-10 h-full">${renderView()}</div>
                        </main>
                    </div>
                </div>
            `;
        };
        
        // ========== 全局状态与事件处理 ==========
        window.appState = { currentView: 'create', createActiveTab: 'text', createPrompt: '', createIsEnhancing: false, createIsGenerating: false, createShowSettings: false, createAspectRatio: '16:9', createDuration: '4s', createResolution: '1080P', createStyle: '通用', createSoundEnabled: false, createModelType: 'v1.5 Pro' };
        
        window.handleNavClick = (view) => { window.appState.currentView = view; renderApp(); document.title = `${view === 'create' ? '创作中心' : view === 'discover' ? '社区发现' : view === 'templates' ? '模板库' : view === 'assets' ? '作品管理' : view === 'characters' ? '主体库' : view === 'likes' ? '收藏夹' : view === 'pricing' ? '会员计划' : '系统设置'} - ${APP_NAME}`; };
        window.handleTabChange = (tab) => { window.appState.createActiveTab = tab; renderApp(); };
        window.handleModelChange = (model) => { window.appState.createModelType = model; renderApp(); };
        window.handleStyleChange = (newStyle) => { window.appState.createStyle = newStyle; renderApp(); };
        window.handleAspectRatioChange = (ratio) => { window.appState.createAspectRatio = ratio; renderApp(); };
        window.handleDurationChange = (newDuration) => { window.appState.createDuration = newDuration; renderApp(); };
        window.handleResolutionChange = (newResolution) => { window.appState.createResolution = newResolution; renderApp(); };
        window.handleSoundToggle = () => { window.appState.createSoundEnabled = !window.appState.createSoundEnabled; renderApp(); };
        window.handleSettingsToggle = () => { window.appState.createShowSettings = !window.appState.createShowSettings; renderApp(); };
        window.handleTagClick = (tag) => { alert(`筛选标签: ${tag}`); };
        window.handleEnhance = () => { window.appState.createIsEnhancing = true; renderApp(); setTimeout(() => { const enhancedPrompts = ["电影镜头，雨中的东京街头，慢动作特写，霓虹灯在水洼中的倒影闪烁，未来主义风格的雨衣人物背影", "一只巨大的发光鲸鱼在赛博朋克城市的上空游动，霓虹灯光映照在它透明的皮肤上，4K电影质感", "微观世界的水滴，内部有完整的生态系统，阳光折射出彩虹，昆虫在其中游动"]; const promptTextarea = document.getElementById('prompt-textarea'); if (promptTextarea) { const currentText = promptTextarea.value.trim(); if (currentText) { promptTextarea.value = currentText + "，镜头缓缓拉远，光影层次丰富，电影级质感"; } else { promptTextarea.value = enhancedPrompts[Math.floor(Math.random() * enhancedPrompts.length)]; } window.appState.createPrompt = promptTextarea.value; } window.appState.createIsEnhancing = false; renderApp(); }, 1500); };
        window.handleGenerate = () => { window.appState.createIsGenerating = true; renderApp(); setTimeout(() => { alert('视频生成任务已提交！完成后将在"作品管理"中显示。'); window.appState.createIsGenerating = false; renderApp(); }, 2000); };
        
        const initEventListeners = () => {
            const promptTextarea = document.getElementById('prompt-textarea');
            if (promptTextarea) { promptTextarea.addEventListener('input', function() { window.appState.createPrompt = this.value; }); }
        };
        
        const renderApp = () => {
            const appElement = document.getElementById('app');
            if (appElement) { appElement.innerHTML = App(); initEventListeners(); lucide.createIcons(); }
        };
        
        document.addEventListener('DOMContentLoaded', () => { renderApp(); lucide.createIcons(); });
    </script>
</body>
</html>
